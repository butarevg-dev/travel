# üî• –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Firebase

## üìã –û–±–∑–æ—Ä

Firebase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ "–°–∞—Ä–∞–Ω—Å–∫ –¥–ª—è –¢—É—Ä–∏—Å—Ç–æ–≤" –¥–ª—è:
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Google, Apple, VK)
- üìä **–•—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö** (POI, –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ç–∑—ã–≤—ã)
- üì± **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∏**

## üöÄ –®–ê–ì 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Firebase

### 1.1 –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Firebase Console
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç

### 1.2 –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
```
1. –ù–∞–∂–º–∏—Ç–µ "Create a project" –∏–ª–∏ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
2. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: "SaranskTourist"
3. –ù–∞–∂–º–∏—Ç–µ "Continue" –∏–ª–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
4. –û—Ç–∫–ª—é—á–∏—Ç–µ Google Analytics (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
5. –ù–∞–∂–º–∏—Ç–µ "Create project" –∏–ª–∏ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
```

### 1.3 –î–æ–±–∞–≤—å—Ç–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
1. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ –∑–Ω–∞—á–æ–∫ iOS (üçé)
2. –í–≤–µ–¥–∏—Ç–µ Bundle ID: com.yourorg.saransk.tourist
3. –í–≤–µ–¥–∏—Ç–µ App nickname: "–°–∞—Ä–∞–Ω—Å–∫ –¥–ª—è –¢—É—Ä–∏—Å—Ç–æ–≤"
4. –ù–∞–∂–º–∏—Ç–µ "Register app"
```

## üì± –®–ê–ì 2: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 2.1 –°–∫–∞—á–∞–π—Ç–µ GoogleService-Info.plist
```
1. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Firebase –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–∫–∞—á–∞—Ç—å GoogleService-Info.plist
2. –ù–∞–∂–º–∏—Ç–µ "Download GoogleService-Info.plist"
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ
```

### 2.2 –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª –≤ Xcode –ø—Ä–æ–µ–∫—Ç
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ Xcode –ø—Ä–æ–µ–∫—Ç
2. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ
3. –í—ã–±–µ—Ä–∏—Ç–µ "Add Files to SaranskTourist"
4. –ù–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ GoogleService-Info.plist
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ "Add to target" –æ—Ç–º–µ—á–µ–Ω–æ
6. –ù–∞–∂–º–∏—Ç–µ "Add"
```

## üîß –®–ê–ì 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Authentication

### 3.1 –í–∫–ª—é—á–∏—Ç–µ –º–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```
1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Authentication"
2. –ù–∞–∂–º–∏—Ç–µ "Get started"
3. –í–∫–ª—é—á–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
   - Google
   - Apple
   - VK (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
```

### 3.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Google Sign-In
```
1. –í —Ä–∞–∑–¥–µ–ª–µ "Sign-in method" –Ω–∞–∂–º–∏—Ç–µ "Google"
2. –í–∫–ª—é—á–∏—Ç–µ Google Sign-In
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É email
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### 3.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Apple Sign-In
```
1. –í —Ä–∞–∑–¥–µ–ª–µ "Sign-in method" –Ω–∞–∂–º–∏—Ç–µ "Apple"
2. –í–∫–ª—é—á–∏—Ç–µ Apple Sign-In
3. –î–æ–±–∞–≤—å—Ç–µ Service ID (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

## üìä –®–ê–ì 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firestore Database

### 4.1 –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```
1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Firestore Database"
2. –ù–∞–∂–º–∏—Ç–µ "Create database"
3. –í—ã–±–µ—Ä–∏—Ç–µ "Start in test mode" (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
4. –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, europe-west3)
5. –ù–∞–∂–º–∏—Ç–µ "Done"
```

### 4.2 –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
–°–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Firestore:

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è "poi" (Points of Interest)
```json
{
  "id": "poi_1",
  "name": "–°–æ–±–æ—Ä –°–≤—è—Ç–æ–≥–æ –§–µ–æ–¥–æ—Ä–∞ –£—à–∞–∫–æ–≤–∞",
  "description": "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π —Ö—Ä–∞–º –°–∞—Ä–∞–Ω—Å–∫–∞",
  "latitude": 54.1833,
  "longitude": 45.1747,
  "category": "religion",
  "rating": 4.8,
  "imageUrl": "https://example.com/cathedral.jpg",
  "address": "—É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 25",
  "phone": "+7 (8342) 123-456",
  "website": "https://example.com",
  "workingHours": "09:00-18:00",
  "price": "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",
  "tags": ["—Å–æ–±–æ—Ä", "—Ä–µ–ª–∏–≥–∏—è", "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞"]
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è "routes" (–ú–∞—Ä—à—Ä—É—Ç—ã)
```json
{
  "id": "route_1",
  "name": "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –°–∞—Ä–∞–Ω—Å–∫–∞",
  "description": "–ü–µ—à–µ—Ö–æ–¥–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –ø–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º—É —Ü–µ–Ω—Ç—Ä—É",
  "duration": "2 —á–∞—Å–∞",
  "distance": "3.5 –∫–º",
  "difficulty": "easy",
  "poiIds": ["poi_1", "poi_2", "poi_3"],
  "imageUrl": "https://example.com/route1.jpg",
  "rating": 4.6,
  "tags": ["–∏—Å—Ç–æ—Ä–∏—è", "–ø–µ—à–µ—Ö–æ–¥–Ω—ã–π", "—Ü–µ–Ω—Ç—Ä"]
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è "reviews" (–û—Ç–∑—ã–≤—ã)
```json
{
  "id": "review_1",
  "poiId": "poi_1",
  "userId": "user_123",
  "userName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "rating": 5,
  "comment": "–û—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–æ–µ –º–µ—Å—Ç–æ!",
  "createdAt": "2024-01-15T10:30:00Z",
  "images": ["https://example.com/review1.jpg"]
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è "users" (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
```json
{
  "id": "user_123",
  "email": "user@example.com",
  "displayName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "photoURL": "https://example.com/avatar.jpg",
  "createdAt": "2024-01-01T00:00:00Z",
  "preferences": {
    "language": "ru",
    "notifications": true,
    "theme": "light"
  },
  "stats": {
    "visitedPOIs": 15,
    "completedRoutes": 3,
    "totalDistance": 12.5
  }
}
```

## üîî –®–ê–ì 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 5.1 –í–∫–ª—é—á–∏—Ç–µ Cloud Messaging
```
1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Cloud Messaging"
2. –ù–∞–∂–º–∏—Ç–µ "Get started"
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
```

### 5.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ APNs (Apple Push Notification service)
```
1. –í Xcode –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Signing & Capabilities"
2. –î–æ–±–∞–≤—å—Ç–µ "Push Notifications"
3. –°–∫–∞—á–∞–π—Ç–µ APNs –∫–ª—é—á –∏–∑ Apple Developer Console
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–ª—é—á –≤ Firebase Console
```

## üìà –®–ê–ì 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Analytics (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 6.1 –í–∫–ª—é—á–∏—Ç–µ Google Analytics
```
1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Analytics"
2. –ù–∞–∂–º–∏—Ç–µ "Get started"
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
```

## üß™ –®–ê–ì 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 7.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```swift
// –í Xcode –¥–æ–±–∞–≤—å—Ç–µ –≤ App.swift:
import FirebaseCore

@main
struct SaranskTouristApp: App {
    init() {
        FirebaseApp.configure()
    }
    
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
```

### 7.2 –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```
1. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö POI –≤ Firestore
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
```

## üîí –®–ê–ì 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 8.1 –ü—Ä–∞–≤–∏–ª–∞ Firestore
```javascript
// –í Firebase Console ‚Üí Firestore Database ‚Üí Rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // POI –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º
    match /poi/{document} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.token.admin == true;
    }
    
    // –ú–∞—Ä—à—Ä—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º
    match /routes/{document} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.token.admin == true;
    }
    
    // –û—Ç–∑—ã–≤—ã - —á–∏—Ç–∞—é—Ç –≤—Å–µ, –ø–∏—à—É—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ
    match /reviews/{document} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Firebase not configured"
```
–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ GoogleService-Info.plist –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied"
```
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Firestore
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Authentication failed"
```
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Firebase iOS Documentation](https://firebase.google.com/docs/ios/setup)
- [Firestore Security Rules](https://firebase.google.com/docs/firestore/security/get-started)
- [Firebase Authentication](https://firebase.google.com/docs/auth)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ü—Ä–æ–µ–∫—Ç Firebase —Å–æ–∑–¥–∞–Ω
- [ ] iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ
- [ ] GoogleService-Info.plist –¥–æ–±–∞–≤–ª–µ–Ω –≤ Xcode
- [ ] Authentication –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Firestore Database —Å–æ–∑–¥–∞–Ω
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

üéâ **Firebase –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**