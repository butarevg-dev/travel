# Агентский бриф — «Саранск для Туристов» (iOS)

## Миссия
Создать нативное iOS‑приложение‑гид по Саранску с офлайн‑контентом, маршрутами, аудиогидами и современными функциями (AR, геймификация, социальные шеры).

## Цели версии MVP (3–4 недели)
- Главная карта (MapKit) с пинами всех POI и фильтрами (архитектура, музеи, еда, сувениры, развлечения)
- Карточка POI: фото, описание, аудиогид, часы/цены, «в избранное»
- Комментарии/рейтинги и форма вопроса (модерируемо)
- Маршруты: предустановленные (3ч/6ч/1 день/выходные), построение по выбранным точкам и времени
- Оффлайн‑режим: загрузка маршрутов, текстов и аудио
- Аутентификация: почта/пароль, соцсети, Google, Sign in with Apple

## Пользователи и сценарии
- Турист на короткий срок: «быстрые маршруты», «что рядом сейчас», аудио в фоне
- Семьи/группы: квесты/бейджи, удобные пешие маршруты, офлайн‑контент
- Любители истории/культуры: детальные описания, AR‑справки, избранное

## Платформа и стек
- iOS 16+ (приоритет), язык Swift, UI — SwiftUI
- Карты/навигация: MapKit, CoreLocation; оффлайн‑кеш — URLCache/FileManager
- AR: ARKit/RealityKit (объекты/подсказки, image/scene anchors)
- Аудио: AVFoundation; аудиогиды (поддержка ElevenLabs, возможна интеграция TTS)
- Бэкенд: Firebase (Auth/Firestore/Storage) или Supabase (Auth/Postgres/Storage); push/analytics — Firebase
- Монетизация: StoreKit (IAP, подписки)

## Источники данных
- Официальные порталы Саранска/региона (POI, события)
- OSM/Wikidata/Wikipedia (координаты, справки) — лицензии и атрибуция
- Партнёры (кафе/сувениры) — скидки/бейджи/промо

## Ключевые ограничения
- Безопасность: приватные ключи — только на сервере; правила доступа в Storage/DB
- Производительность: быстрый холодный старт, плавная карта, кэш медиа
- Оффлайн: базовый пакет контента доступен без сети, явные кнопки загрузки
- Многоязычность: RU/EN на старте, опционально эрзянский/мокшанский
- Дизайн: минимализм, аккуратные мордовские орнаменты, светлая/тёмная темы

## Monetization (минимум 2 канала)
- Премиум‑подписка: эксклюзивные маршруты, расширенный оффлайн, AR‑квесты
- Партнёрские промо и скидки (кафе/сувениры), прозрачная маркировка
- Ненавязчивая афиша событий (рекламные виджеты без трекинга пользователя)

## Definition of Done
- Фичи покрыты smoke сценариями (XCTest/XCUITest), критичные потоки задокументированы
- CI/CD сборка (TestFlight), крашлогирование и базовая аналитика событий
- UX‑состояния: загрузка/ошибки/пусто; офлайн‑fallback; анимации не блокируют
- Документация: README (запуск), CONTENT_GUIDE (схемы), PRIVACY, LICENSE

## Процесс с агентом
- Задачи и план — в `NEXT_STEPS.md`; контекст/решения — в `CONTEXT.md`
- Агент начинает с чтения файлов, формирует план 3–5 задач на спринт
- Каждая задача — отдельный PR/коммит с краткой сводкой в CHANGELOG.md

## Нерешённые вопросы
- Выбор BaaS (Firebase/Supabase) и политика модерации комментариев/вопросов
- Алгоритмы генерации маршрутов (время/интересы/пешая скорость/час работы POI)
- Политика офлайн‑пакетов (объём, автообновление по Wi‑Fi)

