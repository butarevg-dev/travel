# üìö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º POI –∏ –∞—É–¥–∏–æ–≥–∏–¥–∞–º

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (POI) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∞—É–¥–∏–æ–≥–∏–¥–æ–≤.

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
ios/
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ ContentManagementService.swift    ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ AudioPlayerService.swift          ‚Üê –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
‚îÇ   ‚îú‚îÄ‚îÄ AudioCacheManager.swift           ‚Üê –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ
‚îÇ   ‚îî‚îÄ‚îÄ FirestoreService.swift            ‚Üê –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Screens/
‚îÇ   ‚îî‚îÄ‚îÄ ContentManagementScreen.swift     ‚Üê UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
‚îî‚îÄ‚îÄ Models/
    ‚îî‚îÄ‚îÄ POI.swift                         ‚Üê –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö POI

content/
‚îú‚îÄ‚îÄ poi.json                              ‚Üê –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ POI
‚îî‚îÄ‚îÄ routes.json                           ‚Üê –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
```

## üöÄ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è POI

### 1. üì± –ß–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### **–®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º**
```swift
// –í –ª—é–±–æ–º —ç–∫—Ä–∞–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
@State private var showingContentManagement = false

Button("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º") {
    showingContentManagement = true
}
.sheet(isPresented: $showingContentManagement) {
    ContentManagementScreen()
}
```

#### **–®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π POI**
1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **"–î–æ–±–∞–≤–∏—Ç—å POI"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - **–ê–¥—Ä–µ—Å** ‚Äî —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å
   - **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** ‚Äî –≤—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ (–ú—É–∑–µ–∏, –•—Ä–∞–º—ã, –ü–∞—Ä–∫–∏ –∏ —Ç.–¥.)
   - **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** ‚Äî —à–∏—Ä–æ—Ç–∞ –∏ –¥–æ–ª–≥–æ—Ç–∞

#### **–®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**
1. –ù–∞–∂–∞—Ç—å **"–î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"**
2. –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ (–¥–æ 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, HEIC
4. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB

#### **–®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏–æ–≥–∏–¥**
1. –ù–∞–∂–∞—Ç—å **"–î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª"**
2. –í—ã–±—Ä–∞—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: M4A, MP3, WAV, AAC
4. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50MB

#### **–®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å POI**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –µ—Å–ª–∏ –µ—Å—Ç—å)
2. –ù–∞–∂–∞—Ç—å **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å POI"**
3. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ Firebase

### 2. üìÑ –ß–µ—Ä–µ–∑ JSON —Ñ–∞–π–ª—ã (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)

#### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ POI –≤ JSON:**
```json
{
  "id": "poi-saransk-kremlin",
  "name": "–°–æ–±–æ—Ä–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
  "description": "–ì–ª–∞–≤–Ω–∞—è –ø–ª–æ—â–∞–¥—å –≥–æ—Ä–æ–¥–∞ —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –∑–¥–∞–Ω–∏—è–º–∏...",
  "address": "–°–∞—Ä–∞–Ω—Å–∫, –°–æ–±–æ—Ä–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
  "category": "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
  "imageUrl": "https://firebase-storage.com/images/sobornaya.jpg",
  "audioUrl": "https://firebase-storage.com/audio/sobornaya.m4a",
  "latitude": 54.1834,
  "longitude": 45.1749,
  "rating": 4.7,
  "distance": 0.0,
  "popularity": 100,
  "workingHours": "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ 08:00‚Äì20:00",
  "price": null,
  "phone": null,
  "website": null,
  "tags": ["—Ç–æ–ø-–º–µ—Å—Ç–æ", "—Å–µ–º–µ–π–Ω—ã–π"],
  "isFavorite": false
}
```

#### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:**
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å content/poi.json
# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π POI –≤ –º–∞—Å—Å–∏–≤ items
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
```

## üéµ –ö–∞–∫ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã –¥–ª—è –∞—É–¥–∏–æ–≥–∏–¥–∞

### 1. üì± –ß–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- ‚úÖ **M4A** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç (–ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä)
- ‚úÖ **MP3** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **WAV** ‚Äî –Ω–µ—Å–∂–∞—Ç—ã–π –∞—É–¥–∏–æ
- ‚úÖ **AAC** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

#### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞–º:**
- üìè **–†–∞–∑–º–µ—Ä:** –º–∞–∫—Å–∏–º—É–º 50MB
- ‚è±Ô∏è **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2-5 –º–∏–Ω—É—Ç
- üé§ **–ö–∞—á–µ—Å—Ç–≤–æ:** 44.1kHz, 128-256 kbps
- üó£Ô∏è **–Ø–∑—ã–∫:** —Ä—É—Å—Å–∫–∏–π (–¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)

#### **–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:**
1. **–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞** ‚Äî —á–µ—Ä–µ–∑ DocumentPicker
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞
3. **–ü—Ä–µ–¥–ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä
4. **–ó–∞–≥—Ä—É–∑–∫–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase Storage
5. **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ** ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∫ POI –≤ Firestore

### 2. üîß –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

#### **–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ ContentManagementService:**
```swift
let contentService = ContentManagementService.shared

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª
let audioURL = try await contentService.uploadAudioGuide(
    poiId: "poi-saransk-kremlin",
    audioURL: localAudioURL,
    title: "–ê—É–¥–∏–æ–≥–∏–¥: –°–æ–±–æ—Ä–Ω–∞—è –ø–ª–æ—â–∞–¥—å"
)

// –û–±–Ω–æ–≤–∏—Ç—å POI —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–º
var poi = existingPOI
poi.audioUrl = audioURL
try await contentService.updatePOI(poi)
```

#### **–ü–∞–∫–µ—Ç–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
```swift
// –ó–∞–≥—Ä—É–∑–∏—Ç—å POI —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ –∞—É–¥–∏–æ
try await contentService.uploadPOIContent(
    poi: newPOI,
    images: [imageURL1, imageURL2],
    audioURL: audioURL
)
```

### 3. üìÅ –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase

#### **Firebase Storage —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
firebase-storage/
‚îú‚îÄ‚îÄ audio/
‚îÇ   ‚îî‚îÄ‚îÄ poi/
‚îÇ       ‚îú‚îÄ‚îÄ poi-saransk-kremlin_audio1.m4a
‚îÇ       ‚îî‚îÄ‚îÄ poi-museum_audio1.m4a
‚îî‚îÄ‚îÄ images/
    ‚îî‚îÄ‚îÄ poi/
        ‚îú‚îÄ‚îÄ poi-saransk-kremlin_image1.jpg
        ‚îî‚îÄ‚îÄ poi-museum_image1.jpg
```

#### **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞:**
```json
{
  "contentType": "audio/mp4",
  "customMetadata": {
    "poiId": "poi-saransk-kremlin",
    "title": "–ê—É–¥–∏–æ–≥–∏–¥: –°–æ–±–æ—Ä–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
    "uploadedAt": "2025-08-31T10:00:00Z"
  }
}
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 1. üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

#### **Firestore ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞

#### **–õ–æ–∫–∞–ª—å–Ω—ã–π ‚Üí Firebase:**
```swift
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å Firebase
try await contentService.syncLocalContent()
```

### 2. üì§ –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### **–≠–∫—Å–ø–æ—Ä—Ç –≤ JSON:**
```swift
// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
let exportData = try await contentService.exportContent()

// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
let documentsPath = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first!
let exportURL = documentsPath.appendingPathComponent("export.json")
try exportData.write(to: exportURL)
```

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 1. üìã –í–∞–ª–∏–¥–∞—Ü–∏—è POI

#### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- ‚úÖ **–ù–∞–∑–≤–∞–Ω–∏–µ** ‚Äî –Ω–µ –ø—É—Å—Ç–æ–µ
- ‚úÖ **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –Ω–µ –ø—É—Å—Ç–æ–µ
- ‚úÖ **–ê–¥—Ä–µ—Å** ‚Äî –Ω–µ –ø—É—Å—Ç–æ–π
- ‚úÖ **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** ‚Äî –≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** ‚Äî –∏–∑ —Å–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:**
```swift
// –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –°–∞—Ä–∞–Ω—Å–∫–∞
let saranskLatRange = 54.0...54.5
let saranskLngRange = 45.0...45.5

if !saranskLatRange.contains(latitude) || !saranskLngRange.contains(longitude) {
    errors.append("–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –°–∞—Ä–∞–Ω—Å–∫–∞")
}
```

### 2. üéµ –í–∞–ª–∏–¥–∞—Ü–∏—è –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤

#### **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** ‚Äî –º–∞–∫—Å–∏–º—É–º 50MB
- ‚úÖ **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** ‚Äî —Ñ–∞–π–ª –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å
- ‚úÖ **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî –Ω–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π

#### **–ö–æ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```swift
func validateAudioFile(_ url: URL) -> [String] {
    var errors: [String] = []
    
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
    if let fileSize = try? url.resourceValues(forKeys: [.fileSizeKey]).fileSize,
       fileSize > 50 * 1024 * 1024 {
        errors.append("–†–∞–∑–º–µ—Ä –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 50MB")
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç
    let allowedExtensions = ["m4a", "mp3", "wav", "aac"]
    let fileExtension = url.pathExtension.lowercased()
    if !allowedExtensions.contains(fileExtension) {
        errors.append("–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç—ã: \(allowedExtensions.joined(separator: ", "))")
    }
    
    return errors
}
```

### 3. üñºÔ∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** ‚Äî –º–∞–∫—Å–∏–º—É–º 10MB
- ‚úÖ **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞** ‚Äî JPG, PNG, HEIC
- ‚úÖ **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ** ‚Äî –º–∏–Ω–∏–º—É–º 300x300 –ø–∏–∫—Å–µ–ª–µ–π
- ‚úÖ **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16:9 –∏–ª–∏ 4:3

## üéß –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ–≥–∏–¥–æ–≤

### 1. üì± –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ:**
```swift
// –ü—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ POI
if !poi.audioUrl.isEmpty {
    audioPlayer.loadAudio(from: URL(string: poi.audioUrl)!, title: poi.name, poiId: poi.id)
    audioPlayer.play()
}
```

#### **–†—É—á–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ:**
```swift
// –í –¥–µ—Ç–∞–ª—å–Ω–æ–º —ç–∫—Ä–∞–Ω–µ POI
Button("–°–ª—É—à–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥") {
    if let audioURL = URL(string: poi.audioUrl) {
        audioPlayer.loadAudio(from: audioURL, title: "–ê—É–¥–∏–æ–≥–∏–¥: \(poi.name)", poiId: poi.id)
        audioPlayer.play()
    }
}
```

### 2. üîÑ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

#### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º:**
```swift
let cacheManager = AudioCacheManager.shared

// –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
cacheManager.downloadAudio(from: audioURL) { result in
    switch result {
    case .success(let localURL):
        print("–ê—É–¥–∏–æ —Å–∫–∞—á–∞–Ω–æ: \(localURL)")
    case .failure(let error):
        print("–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è: \(error)")
    }
}

// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
cacheManager.clearCache()
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 1. üìà –ú–µ—Ç—Ä–∏–∫–∏

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- üìç **–í—Å–µ–≥–æ POI** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- üéµ **–° –∞—É–¥–∏–æ** ‚Äî POI —Å –∞—É–¥–∏–æ–≥–∏–¥–∞–º–∏
- üñºÔ∏è **–° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏** ‚Äî POI —Å —Ñ–æ—Ç–æ
- üì± **–í–µ—Ä—Å–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞** ‚Äî —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è

#### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- üë• **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ POI** ‚Äî –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ—Å–µ—â–µ–Ω–∏–π
- ‚≠ê **–†–µ–π—Ç–∏–Ω–≥** ‚Äî —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥
- üó∫Ô∏è **–ü–æ–∫—Ä—ã—Ç–∏–µ** ‚Äî –ø–æ —Ä–∞–π–æ–Ω–∞–º –≥–æ—Ä–æ–¥–∞
- üìÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Äî —á–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 2. üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

#### **Firebase Analytics —Å–æ–±—ã—Ç–∏—è:**
```swift
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ
Analytics.logEvent("audio_play", parameters: [
    "poi_id": poi.id,
    "poi_name": poi.name,
    "audio_duration": audioPlayer.duration,
    "playback_position": audioPlayer.currentTime
])

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è POI
Analytics.logEvent("poi_added", parameters: [
    "poi_id": poi.id,
    "poi_category": poi.category,
    "has_audio": !poi.audioUrl.isEmpty,
    "has_images": !poi.imageUrl.isEmpty
])
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### 1. üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### **MVVM –ø–∞—Ç—Ç–µ—Ä–Ω:**
- **Model** ‚Äî `POI`, `AudioTrack`
- **View** ‚Äî `ContentManagementScreen`, `AddPOIScreen`
- **ViewModel** ‚Äî `ContentManagementViewModel`, `AddPOIViewModel`

#### **–°–µ—Ä–≤–∏—Å—ã:**
- **ContentManagementService** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **AudioPlayerService** ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
- **AudioCacheManager** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **FirestoreService** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 2. üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí UI ‚Üí ViewModel ‚Üí Service ‚Üí Firebase
     ‚Üë                                    ‚Üì
     ‚Üê UI ‚Üê ViewModel ‚Üê Service ‚Üê Firebase ‚Üê
```

### 3. üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

#### **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:**
- ‚úÖ **iPhone** ‚Äî Portrait –∏ Landscape
- ‚úÖ **iPad** ‚Äî Portrait –∏ Landscape
- ‚úÖ **–†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–æ–≤**
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ç–∏–ø**

#### **–û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º:**
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ** ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî JSON —Ñ–∞–π–ª—ã
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** ‚Äî –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. üìù –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### **–î–ª—è POI:**
- ‚úçÔ∏è **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî 100-300 —Å–ª–æ–≤, –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ
- üìç **–ê–¥—Ä–µ—Å** ‚Äî —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å —Å –Ω–æ–º–µ—Ä–æ–º –¥–æ–º–∞
- üè∑Ô∏è **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- üè∑Ô∏è **–¢–µ–≥–∏** ‚Äî —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–µ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞

#### **–î–ª—è –∞—É–¥–∏–æ–≥–∏–¥–æ–≤:**
- ‚è±Ô∏è **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî 2-5 –º–∏–Ω—É—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
- üó£Ô∏è **–î–∏–∫—Ç–æ—Ä** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å
- üéµ **–ú—É–∑—ã–∫–∞** ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- üìù **–°—Ü–µ–Ω–∞—Ä–∏–π** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

### 2. üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

#### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- üìê **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ** ‚Äî –º–∏–Ω–∏–º—É–º 1200x800 –ø–∏–∫—Å–µ–ª–µ–π
- üì∑ **–ö–∞—á–µ—Å—Ç–≤–æ** ‚Äî –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –±–µ–∑ —Ä–∞–∑–º—ã—Ç–∏—è
- üé® **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è** ‚Äî –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ä–∞–∫—É—Ä—Å—ã
- üåÖ **–û—Å–≤–µ—â–µ–Ω–∏–µ** ‚Äî —Ö–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ

### 3. üéµ –ê—É–¥–∏–æ

#### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- üé§ **–ó–∞–ø–∏—Å—å** ‚Äî –≤ —Ç–∏—Ö–æ–º –ø–æ–º–µ—â–µ–Ω–∏–∏
- üéß **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî –Ω–∞—É—à–Ω–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è
- üìä **–£—Ä–æ–≤–µ–Ω—å** ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏
- üîÑ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### 1. ‚ùå –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

#### **–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### **–ü—Ä–æ–±–ª–µ–º–∞:** –ê—É–¥–∏–æ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
- –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∞—É–¥–∏–æ
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª

### 2. üîÑ –ü—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### **–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Firebase
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 3. üì± –ü—Ä–æ–±–ª–µ–º—ã UI

#### **–ü—Ä–æ–±–ª–µ–º–∞:** –≠–∫—Ä–∞–Ω –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
- –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- üìö [Firebase Documentation](https://firebase.google.com/docs)
- üéµ [AVFoundation Guide](https://developer.apple.com/documentation/avfoundation)
- üì± [SwiftUI Documentation](https://developer.apple.com/documentation/swiftui)

### üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã:
- üêõ **–ë–∞–≥–∏ –∏ –æ—à–∏–±–∫–∏** ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- üí° **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** ‚Äî –æ–±—Å—É–¥–∏—Ç–µ –≤ Discussions
- üìß **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∫–æ–º–∞–Ω–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

**üéâ –¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º POI –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞—É–¥–∏–æ–≥–∏–¥—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–°–∞—Ä–∞–Ω—Å–∫ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤"!**