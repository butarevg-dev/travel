# Контекст и вводные — «Саранск для Туристов» (iOS)

## Исходные вводные
- Название: «Саранск для туристов»
- Платформа: iOS 16+, нативно (Swift/SwiftUI)
- Ключевой функционал: карта POI, карточки с фото/описанием/аудиогидом, комментарии/вопросы/рейтинги, маршруты (предустановленные и персональные), оффлайн, AR, геймификация, шеры, события/погода, многоязычность
- Визуальный стиль: минимализм, светлая/тёмная темы; мягкие орнаментальные акценты Мордовии; SF Pro

## Карта и фильтры
- Главная карта (MapKit), все точки видны сразу, кластеризация
- Фильтры категорий: архитектура, музеи, еда, сувениры, развлечения, события
- Инструмент «Собрать маршрут»: выбор точек + целевое время (3ч/6ч/1д/выходные)

## Карточка точки (POI)
- Медиа: 1–5 фото (WebP/JPEG), аудиогид (m4a/aac), текстовое описание
- Метаданные: категории, адрес/координаты, часы работы, цены/билеты, сайт/телефон
- Взаимодействия: рейтинг, отзывы/комментарии, задать вопрос (чат к сообществу/боту), «в избранное», «в маршрут»
- AR‑режим: навёл камеру — подсказка (название, краткий факт, «подробнее»)

## Маршруты
- Предустановленные: 3 часа, 6 часов, 1 день, выходные
- Генерация на основе интересов и времени, учёт часов работы POI
- Навигация по шагам на карте, расчёт времени, прогресс, шаринг маршрута

## Современные фичи
- AR‑гид: ARKit/RealityKit, image/scene anchors; on‑device подсказки
- Геймификация: бейджи за посещения, квесты (например, 5 точек за день → скидка)
- Оффлайн‑режим: загрузка пакетов (маршруты, описания, аудио); управление кэшем
- Соцсети: шаринг маршрутов/фото; deep links
- Погода и события: виджет на главной, афиша с фильтрами по датам
- Многоязычность: RU/EN; опционально эрзянский/мокшанский; автоперевод при необходимости

## Аудиогиды
- Источник: файлы от ElevenLabs (возможен наш TTS как альтернатива)
- Плеер: мини‑панель снизу, фоновой режим; Play/Pause, ±10 сек, скорость 0.5/1/1.5/2x, прогресс‑бар, скачивание для оффлайн
- Форматы и хранение: m4a/aac; кеш в FileManager с версионированием

## Аутентификация и профиль
- Регистрация: почта/пароль, соцсети, Google, Sign in with Apple
- Профиль: история маршрутов, избранное, бейджи/квесты, язык, оффлайн‑настройки
- Модерация: жалобы на контент/комментарии, базовая антиспам‑логика

## Монетизация
- Премиум‑подписка: эксклюзивные маршруты, расширенный оффлайн, AR‑квесты
- Партнёрки: скидки и промо (кафе/сувениры) через промокоды/QR; прозрачная маркировка
- Реклама событий города: нативные карточки без навязчивых баннеров

## Технические заметки
- Данные: Firestore/Supabase (POI, отзывы, маршруты), Storage (изображения/аудио)
- Схема контента: `/content/poi.json`, `/content/routes.json` (seed), затем миграция в БД
- Оффлайн: базовый пакет внутри app bundle + обновления по сети; manual download
- Карта: кластеризация маркеров, полилинии маршрутов
- Push: уведомления о событиях/квестах; Analytics для воронок
- Privacy: минимизация данных, прозрачные разрешения (гео, камера, микрофон)

## Лицензии и источники
- OSM/MapKit — атрибуция; Wikidata/Wikipedia — соблюдение лицензий
- Медиа: свои/CC BY с явным хранением лицензий в метаданных

## Глоссарий
- POI — точка интереса; Квест — задача на посещение/действия; Оффлайн‑пакет — скачанный набор медиа/данных

## Открытые вопросы
- Какой BaaS выбрать (Firebase vs Supabase)?
- Политика модерации и SLA ответов в «вопросах»
- Правила AR‑якорей: какая база изображений для распознавания